<% provide(:title, "Review Table of Contents for #{@book.title}") %>
<% total_characters = 0 %>
<% chars_per_page = 3500 %>

<table class="book-data-review">
	<thead>
		<tr>
			<th>Chapter No.</th>
			<th>Title</th>
			<th>Characters</th>
			<th>Pages <br />(estimated)</th>
		</tr>
	</thead>
	<tbody>
  <% @book.sections.each do |section| %>
		<%- characters = section.text.length %>
		<%- total_characters += characters %>
		<tr>
			<td><%= section.chapter rescue nil %></td>
			<td><%= section.title rescue nil %></td>
			<td><%= number_with_delimiter(characters) %></td>
			<td><%= characters / chars_per_page %></td>
		</tr>
    <% end %>
		<tr>
			<td>Total</td>
			<td></td>
			<td><%= number_with_delimiter(total_characters) %></td>
			<td><%= total_characters / chars_per_page %></td>
		</tr>
	</tbody>
</table>
<p><%= link_to "Read #{@book.title}", @book, class: "btn" %>